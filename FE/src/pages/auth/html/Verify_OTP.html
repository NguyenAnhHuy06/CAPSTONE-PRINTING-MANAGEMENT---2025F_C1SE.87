<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Email Verification</title>
  <link rel="stylesheet" href="/FE/src/pages/auth/css/Verify_OTP.css">
  <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
</head>
<body>
  <div class="container">
    <div class="icon">
      <i class='bxr  bx-envelope'></i> 
    </div>
    <h2>Email Verification</h2>
    <p>Enter the 6-digit code sent to your email</p>

    <div class="otp-field">
      <input type="text" maxlength="1" inputmode="numeric" />
      <input type="text" maxlength="1" inputmode="numeric" />
      <input type="text" maxlength="1" inputmode="numeric" />
      <input type="text" maxlength="1" inputmode="numeric" />
      <input type="text" maxlength="1" inputmode="numeric" />
      <input type="text" maxlength="1" inputmode="numeric" />
    </div>

    <div class="resend">Resend Code</div>
    <button id="verifyBtn">Verify</button>
    <div class="error" id="error">Invalid code. Please try again.</div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const inputs = document.querySelectorAll(".otp-field input");
      const verifyBtn = document.getElementById("verifyBtn");
      const errorMsg = document.getElementById("error");
      const correctOTP = "123456";

      inputs.forEach((input, index) => {
        input.addEventListener("input", (e) => {
          let value = e.target.value.replace(/\D/g, "");
          if (value.length > 1) value = value.slice(-1); // chỉ giữ ký tự cuối
          e.target.value = value;

          if (value && index < inputs.length - 1) {
            inputs[index + 1].focus();
          }
        });

        input.addEventListener("keydown", (e) => {
          if (e.key === "Backspace" && !input.value && index > 0) {
            inputs[index - 1].focus();
          }
        });

        input.addEventListener("paste", (e) => {
          e.preventDefault();
          const pasted = e.clipboardData.getData("text").replace(/\D/g, "").slice(0, inputs.length);
          pasted.split("").forEach((char, i) => {
            if (inputs[i]) inputs[i].value = char;
          });
          if (pasted.length < inputs.length) {
            inputs[pasted.length].focus();
          } else {
            inputs[inputs.length - 1].focus();
          }
        });
      });

      verifyBtn.addEventListener("click", () => {
        const otp = Array.from(inputs).map(i => i.value).join("");
        if (otp === correctOTP) {
          errorMsg.style.display = "none";
          //alert("Verification successful!");
          window.location.href = "Login.html";
        } else {
          errorMsg.style.display = "block";
          inputs.forEach(i => i.value = "");
          inputs[0].focus();
        }
      });
    });
  </script>
</body>
</html>